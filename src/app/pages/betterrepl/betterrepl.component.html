<div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--6-col-tablet mdl-cell--4-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Last request</h2>
    </base-card-title>
    <base-card-body>
      <div id="lastRequest">Request: {{ lastRequestCommand }}
        <span class="color-text--green" *ngIf="lastRequestSuccessful">(success)</span>
        <span class="color-text--red" *ngIf="!lastRequestSuccessful">(failure)</span>
      </div>
      <div id="lastResponse">{{ lastRequestMessage }}</div>
    </base-card-body>
  </base-card>
</div>
<div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--6-col-tablet mdl-cell--4-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Login / Register</h2>
    </base-card-title>
    <base-card-body>
      <div id="loginButtons">
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="password" id="password" value="" #passwordInput
                 (keyup.enter)="login(passwordInput.value)"/>
          <label class="mdl-textfield__label" for="password">Framework password</label>
        </div>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                (click)="login(passwordInput.value)">
          <i class="material-icons">vpn_key</i>
          Login
        </button>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-light-blue"
                (click)="register(passwordInput.value)">
          <i class="material-icons">account_circle</i>
          Register
        </button>
      </div>
      <div id="authKey">Authentication key:
        <span *ngIf="authKey.length > 0">{{ authKey }}</span>
        <span *ngIf="authKey.length == 0">(Not logged in)</span>
      </div>
    </base-card-body>
  </base-card>
</div>


<div class="mdl-cell mdl-cell--4-col-desktop mdl-cell--4-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Connector types</h2>
    </base-card-title>
    <base-card-body>
      <ul class="typeList">
        <li *ngFor="let connectorType of connectorTypes">{{ connectorType }}</li>
      </ul>
      <div id="requestTypes">
        <div>
          <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" id="reqImplTypeString" value="" #reqImplTypeString
                   (keyup.enter)="getRequirementImpl(reqImplTypeString.value)"/>
            <label class="mdl-textfield__label" for="reqImplTypeString">API type string</label>
          </div>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-teal"
                  (click)="getRequirementImpl(reqImplTypeString.value)">Get Req Impl
          </button>
        </div>
        <div>
          <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" id="getSubTypesString" value="" #getSubTypesString
                   (keyup.enter)="getSubTypes(getSubTypesString.value)"/>
            <label class="mdl-textfield__label" for="getSubTypesString">API type string</label>
          </div>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-teal"
                  (click)="getSubTypes(getSubTypesString.value)">Get sub types
          </button>
        </div>
      </div>

    </base-card-body>
  </base-card>
</div>
<div class="mdl-cell mdl-cell--4-col-desktop mdl-cell--4-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Requirement types</h2>
    </base-card-title>
    <base-card-body>
      <ul class="typeList">
        <li *ngFor="let inputType of requirementTypes?.input">{{ inputType }}</li>
      </ul>
      <ul class="typeList">
        <li *ngFor="let outputType of requirementTypes?.output">{{ outputType }}</li>
      </ul>
      <ul class="typeList">
        <li *ngFor="let parameterType of requirementTypes?.parameter">{{ parameterType }}</li>
      </ul>
    </base-card-body>
  </base-card>
</div>
<div class="mdl-cell mdl-cell--4-col-desktop mdl-cell--4-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Plugin types</h2>
    </base-card-title>
    <base-card-body>
      <ul class="typeList">
        <li *ngFor="let pluginType of pluginTypes">{{ pluginType.name }} ({{pluginType.author}})</li>
      </ul>
    </base-card-body>
  </base-card>
</div>


<div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--6-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Connectors</h2>
    </base-card-title>
    <base-card-body>
      <div>
        <button class="mdl-button mdl-js-button mdl-js-ripple-effect button--colored-white"
                (click)="getRegisteredConnectors()">
          <i class="material-icons">refresh</i>
          Refresh connectors
        </button>
      </div>
      <ul>
        <li *ngFor="let connectorKey of connectorKeys">{{connectorKey.sourceIdentifier}}
          <button class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect button--colored-teal"
                  (click)="copyConnectorData(connectorKey)">
            <i class="material-icons">edit</i>
          </button>
          <ul>
            <li>{{connectorKey.qualifiedConnectorType}}</li>
          </ul>
        </li>
      </ul>
    </base-card-body>
  </base-card>
</div>
<div class="mdl-cell mdl-cell--3-col-desktop mdl-cell--3-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Manage connectors</h2>
    </base-card-title>
    <base-card-body>
      <div class="form">
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="mcSourceIdentifierValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="manageConnectorSourceIdentifier" value=""
                 #mcSourceIdentifier [(ngModel)]="mcSourceIdentifierValue"/>
          <label class="mdl-textfield__label" for="manageConnectorSourceIdentifier">Source identifier</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="mcConnectorTypeValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="manageConnectorConnectorType" value=""
                 #mcConnectorType [(ngModel)]="mcConnectorTypeValue"/>
          <label class="mdl-textfield__label" for="manageConnectorConnectorType">Connector type</label>
        </div>
        <div class="manageButtons">
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-light-blue"
                  (click)="manageConnectorGET(mcSourceIdentifier.value, mcConnectorType.value)">
            GET
          </button>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                  (click)="manageConnectorPOST(mcSourceIdentifier.value, mcConnectorType.value)">
            ADD
          </button>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-red"
                  (click)="manageConnectorDELETE(mcSourceIdentifier.value, mcConnectorType.value)">
            DELETE
          </button>
        </div>
      </div>
    </base-card-body>
  </base-card>
</div>
<div class="mdl-cell mdl-cell--3-col-desktop mdl-cell--3-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Manage credentials</h2>
    </base-card-title>
    <base-card-body>
      <div class="form">
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="mcrSourceIdentifierValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="manageCredentialsSourceIdentifier" value=""
                 #mcrSourceIdentifier [(ngModel)]="mcrSourceIdentifierValue"/>
          <label class="mdl-textfield__label" for="manageCredentialsSourceIdentifier">Source identifier</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="mcrConnectorTypeValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="manageCredentialsConnectorType" value=""
                 #mcrConnectorType [(ngModel)]="mcrConnectorTypeValue"/>
          <label class="mdl-textfield__label" for="manageCredentialsConnectorType">Connector type</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" id="manageCredentialsKey" value=""
                 #mcrKey/>
          <label class="mdl-textfield__label" for="manageCredentialsKey">Key</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" id="manageCredentialsValue" value=""
                 #mcrValue/>
          <label class="mdl-textfield__label" for="manageCredentialsValue">Value</label>
        </div>
        <div class="manageButtons">
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-light-blue"
                  (click)="manageCredentialsGET(mcrSourceIdentifier.value, mcrConnectorType.value, mcrKey.value)">
            GET
          </button>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                  (click)="manageCredentialsPOST(mcrSourceIdentifier.value, mcrConnectorType.value,
                  mcrKey.value, mcrValue.value)">
            ADD
          </button>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-red"
                  (click)="manageCredentialsDELETE(mcrSourceIdentifier.value, mcrConnectorType.value, mcrKey.value)">
            DELETE
          </button>
        </div>
      </div>
    </base-card-body>
  </base-card>
</div>


<div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--6-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Plugin instances</h2>
    </base-card-title>
    <base-card-body>
      <div>
        <button class="mdl-button mdl-js-button mdl-js-ripple-effect button--colored-white"
                (click)="getInstances()">
          <i class="material-icons">refresh</i>
          Refresh instances
        </button>
      </div>
      <ul>
        <li *ngFor="let instance of pluginInstances">
          <span class="color-text--orange" *ngIf="!instance.isRunning">{{ instance.instanceName }}</span>
          <span class="color-text--green" *ngIf="instance.isRunning">{{ instance.instanceName }}</span>
          <button class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect"
                  [class.button--colored-orange]="!instance.isRunning"
                  [class.button--colored-green]="instance.isRunning"
                  (click)="copyInstanceData(instance)">
            <i class="material-icons">edit</i>
          </button>
          <ul>
            <li>{{ instance.pluginName }} ({{ instance.pluginAuthor }})</li>
            <li>{{ instance.requirementIDs }}</li>
          </ul>
        </li>
      </ul>
    </base-card-body>
  </base-card>
</div>
<div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--6-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Start / Stop / Log</h2>
    </base-card-title>
    <base-card-body>
      <div class="manageButtons">
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="instanceNameSSValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="instanceNameSS" value=""
                 #instanceNameSS [(ngModel)]="instanceNameSSValue"/>
          <label class="mdl-textfield__label" for="instanceNameSS">Instance Name</label>
        </div>

        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                (click)="startPlugin(instanceNameSS.value)">
          START
        </button>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-red"
                (click)="stopPlugin(instanceNameSS.value)">
          STOP
        </button>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-orange"
                (click)="getLog(instanceNameSS.value)">
          Show log
        </button>
      </div>
      <div #instanceLog id="instanceLog" style="white-space: pre-wrap" *ngIf="instanceLogOutput?.length > 0">{{ instanceLogOutput.join("\n") }}</div>
    </base-card-body>
  </base-card>
</div>

<div class="mdl-cell mdl-cell--3-col-desktop mdl-cell--3-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Create / Delete instance</h2>
    </base-card-title>
    <base-card-body>
      <div class="form">
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="miPluginNameValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="manageInstancePluginName" value=""
                 #miPluginName [(ngModel)]="miPluginNameValue">
          <label class="mdl-textfield__label" for="manageInstancePluginName">Plugin name</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="miPluginAuthorValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="manageInstancePluginAuthor" value=""
                 #miPluginAuthor [(ngModel)]="miPluginAuthorValue"/>
          <label class="mdl-textfield__label" for="manageInstancePluginAuthor">Plugin author</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="miInstanceNameValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="manageInstanceInstanceName" value=""
                 #miInstanceName [(ngModel)]="miInstanceNameValue"/>
          <label class="mdl-textfield__label" for="manageInstanceInstanceName">Instance name</label>
        </div>
      </div>
      <div class="manageButtons">
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                (click)="createPluginInstance(miInstanceName.value, miPluginName.value, miPluginAuthor.value)">
          CREATE
        </button>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-red"
                (click)="deletePluginInstance(miInstanceName.value)">
          DELETE
        </button>
      </div>
    </base-card-body>
  </base-card>
</div>
<div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--6-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Instance requirements</h2>
    </base-card-title>
    <base-card-body>
      <div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="requirementsInstanceNameValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="requirementsInstanceName" value=""
                 #requirementsInstanceName [(ngModel)]="requirementsInstanceNameValue"
                 (keyup.enter)="getRequirements(requirementsInstanceName.value)"/>
          <label class="mdl-textfield__label" for="requirementsInstanceName">Instance name</label>
        </div>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-teal"
                (click)="getRequirements(requirementsInstanceName.value)">Show requirements
        </button>
      </div>
      <ul>
        <li *ngFor="let requirement of instanceRequirements">
          {{requirement.uniqueRequirementId}} ({{requirement.name}})
          <button class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect button--colored-teal"
                  (click)="copyRequirementData(requirement, requirementsInstanceName.value)">
            <i class="material-icons">edit</i>
          </button>
          <ul>
            <li>optional: {{requirement.isOptional}} - set: {{requirement.isSet}}</li>
            <li>type: {{requirement.targetType}}</li>
            <li>value: {{requirement.value}}</li>
          </ul>
        </li>
      </ul>
    </base-card-body>
  </base-card>
</div>
<div class="mdl-cell mdl-cell--3-col-desktop mdl-cell--3-col-tablet mdl-cell--2-col-phone">
  <base-card>
    <base-card-title>
      <h2 class="mdl-card__title-text">Change requirement</h2>
    </base-card-title>
    <base-card-body>
      <div class="form">
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="changeReqInstanceNameValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="changeReqInstanceName" value=""
                 #changeReqInstanceName [(ngModel)]="changeReqInstanceNameValue"/>
          <label class="mdl-textfield__label" for="changeReqInstanceName">Instance name</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="changeReqIDValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="changeReqID" value=""
                 #changeReqID [(ngModel)]="changeReqIDValue"/>
          <label class="mdl-textfield__label" for="changeReqID">Requirement ID</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="changeReqTypeValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="changeReqType" value=""
                 #changeReqType [(ngModel)]="changeReqTypeValue"/>
          <label class="mdl-textfield__label" for="changeReqType">Target type</label>
        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             [class.is-dirty]="changeReqValueValue.length > 0">
          <input class="mdl-textfield__input" type="text" id="changeReqValue" value=""
                 #changeReqValue [(ngModel)]="changeReqValueValue"/>
          <label class="mdl-textfield__label" for="changeReqValue">Value</label>
        </div>

      <div class="manageButtons">
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                (click)="setRequirement(changeReqInstanceName.value, changeReqID.value,
               changeReqType.value, changeReqValue.value)">
          PUT
        </button>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-red"
                (click)="removeRequirement(changeReqInstanceName.value, changeReqID.value)">
          DELETE
        </button>
      </div>
      </div>
    </base-card-body>
  </base-card>
</div>
